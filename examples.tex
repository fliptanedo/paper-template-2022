%!TEX root = paper.tex
%% Update the above with the appropriate root


\section{Common environments}


\subsection{Figures: floating and wrapped}

\begin{figure}%[th]
    \centering
    \includegraphics[width=0.4\textwidth]{example-image-a}
    \caption{The figure environment shows up often.}
    \label{fig:figure:example}
\end{figure}

Use \textbackslash\texttt{centering} rather than the \texttt{center} environment in figure environments to avoid adding extra vertical space.\footnote{\url{https://tex.stackexchange.com/a/23653/8094}\label{foot:centering}}


\begin{wrapfigure}{l}{0.3\textwidth}
	\includegraphics[width=0.9\linewidth]{example-image-a}
	\caption{via \texttt{wrapfigure}.}
	\label{fig:wrapfig}
\end{wrapfigure}
\lipsum[1]

\subsection{Figures in Equation Environments}
\label{sec:figs}

\begin{align}
	\vcenter{
		\hbox{\includegraphics[width=.1\textwidth]{{example-image-a}}}
		}
	&=
	i g \gamma^\mu \ . 
	\label{eq:vector}
	\\
	\vcenter{
		\hbox{\includegraphics[width=.1\textwidth]{{example-image-a}}}
		}
	&=
	g \gamma^\mu\gamma^5 \ . 
	\label{eq:axial}
	\\
	\vcenter{
		\hbox{\includegraphics[width=.1\textwidth]{{example-image-a}}}
		}
	&=
	ig  \ . 
	\label{eq:scalar}
	\\
	\vcenter{
		\hbox{\includegraphics[width=.1\textwidth]{{example-image-a}}}
		}
	&=
	g \gamma^5 \ . 
	\label{eq:pseudo}
\end{align}


\subsection{Best practices for tables}
\label{sec:tables}

% \begin{table}
	% \renewcommand{\arraystretch}{1.3} % spacing between rows
	% \centering
	\begin{tabular}{ @{} llll @{} } \toprule % @{} removes space
		Element 
		& Core MF 
		& Mantle MF 
		& $C_\text{cap}^N (\text{s}^{-1})$ 
		\\ \hline
		Iron 
		& 0.855 
		& 0.0626 
		& $9.43\times 10^{7}$ 
		\\
		Nickel 
		& 0.052 
		& 0.00196 
		& $7.10\times 10^{6}$ 
		\\
		Silicon 
		& 0.06 
		& 0.210 
		& $2.24\times 10^{6}$ 
		\\
		Magnesium 
		& 0 
		& 0.228 
		& $1.05\times 10^{6}$ 
		\\ \bottomrule
	\end{tabular}
	% \caption{
		% Mass fractions of the Earth's core and mantle.
		% \label{table:elements}
% 	}
% \end{table}




\section{Labels and cleveref}
\label{sec:labels:and:cleveref}


\subsection{\texorpdfstring{\texttt{cleveref}}{cleveref}}
\label{sec:cleveref}

\texttt{cleveref} is a handy package when referring to ranges of equations. 

The pseudoscalar rule is:
\begin{itemize}
	\item Using \texttt{amsmath.sty}'s \texttt{eqref}: \eqref{eq:pseudo}
	\item Using \texttt{cleverefs}'s \texttt{cref}: \cref{eq:pseudo}
\end{itemize}

The equations above are
\begin{itemize}
	\item Using \texttt{amsmath.sty}'s \texttt{eqref}: \eqref{eq:vector} -- \eqref{eq:pseudo}
	\item Using \texttt{cleverefs}'s \texttt{crefrange}: \crefrange{eq:vector}{eq:pseudo}
\end{itemize}

The equations above are (glomped together)
\begin{itemize}
	\item Using \texttt{amsmath.sty}'s \texttt{eqref}: \eqref{eq:vector}, \eqref{eq:axial}, \eqref{eq:scalar}, \eqref{eq:pseudo}
	\item Using \texttt{cleverefs}'s \texttt{cref}: \cref{eq:vector,eq:pseudo,eq:axial,eq:scalar}
\end{itemize}

\texttt{cleveref} automatically identifies the type of object it is referring to. Thus you can use \textbackslash\texttt{cref} to refer to any label, for example \cref{foot:centering}. You can use \textbackslash\texttt{Cref} to have a capitalized the cross reference name. For example: the sections above are \Cref{sec:macros,sec:cleveref,sec:figs,sec:tables}.



\subsection{Sub-equations}

One can also wrap a \texttt{align} environment with a \texttt{subequations} environment. The \texttt{subequations} environment can be given a label. For example,
\begin{subequations}\label{eq:subequations}
\begin{align}
	a &= \pi 
	\label{eq:subequation:1}
	\\
	b &= \e^{i\pi} 
	\ .
	\label{eq:subequation:2}
\end{align}
\end{subequations}
where we can now refer to the pair of equations \eqref{eq:subequations} or simply one of the equations, \eqref{eq:subequation:2}. This also works in \texttt{cleveref}: \cref{eq:subequations} and \cref{eq:subequation:2}.


\subsection{Referring to Equations}

One style suggestion is to use parentheses to refer to an equation with no additional modifiers \emph{except} at the beginning of a sentence.\footnote{\url{https://academia.stackexchange.com/a/21793}} For example: ``The second term in (3)...'' and ``Equation~(3) has two terms...''



\section{Macros}
\label{sec:macros}


\subsection{Modest capitalization}

Small caps are useful when your text contains acronyms and you do not want them to visually imply emphasis. In other words, we can use them as `not shouting' capitalization. We define a macro \texttt{acro} for this purpose. The default is for \texttt{acro} to be a wrapper for \texttt{small}. Here is an example:
\begin{itemize}
	\item \acro{AdS} in \acro{5D} at the \acro{LHC}.
	\item AdS in 5D at the LHC. 
	\item A third list item to test list spacing.
\end{itemize}


\subsection{Comments for Collaboration}

There are many ways to add notes when collaborating on a document. I like in-line notes with an author name and a color.  \flip{This is an example of a comment.} It is also useful to have a macro for highlighting new text and for proposing the removal of old text.

\new{
I fixed the equation:
\begin{align}
	a=b^2 
	\label{eq:samename}
\end{align}
It has label \texttt{eq:samename}. 
}

\remove{
	% It is good practice to indent the `to-be deleted' text
	Here is an equation:
	\begin{align}
	a=b 
	\label{eq:samename}
	\end{align}
	It has label \texttt{eq:samename}.
}

This is essentially a manual version of the \texttt{latexdiff} command. This command can be notoriously fussy around math environments. I personally advocate for using \texttt{git}-related tools to quickly identifying where a version was edited and then using tags to identify edits that need to be highlighted for further discussion. One nice thing about the \texttt{remove} tag above is that it also strips any \texttt{label}s so that there are no `multiply defined label' arguments and one can uniquely refer to a single equation, \eqref{eq:samename}.

\begin{flipcomment}
This is an extended comment that shows up as a text box. I might use this to make some ponderous point about why I think my version of a draft paragraph is more appropriate than yours.
\end{flipcomment}


\subsection{Writing Macros}

The \textbackslash\texttt{xspace} command is useful at the end of a macro. It stands for: ``insert a space if and only if there is supposed to be a space.'' Consider the following examples:
\begin{itemize}
	\item Without \texttt{xspace}: \LaTeX typesetting...
	\item With \texttt{xspace}: \LaTeX\xspace typesetting...
	\item Without \texttt{xspace}: Typeset with \LaTeX.
	\item With \texttt{xspace}: Typeset with \LaTeX\xspace.
\end{itemize}


\section{Mathematics and Physics}

\subsection{Environments}

Use the \texttt{align} environment instead of \texttt{eqnarray}, see the TeXblog discussion\footnote{\url{https://texblog.net/latex-archive/maths/eqnarray-align-environment/}}. The double dollar sign notation for \texttt{displaymath} is depreciated.\footnote{\url{https://tex.stackexchange.com/questions/503/why-is-preferable-to}} The suggested alternative is \textbackslash\texttt{[} and \textbackslash\texttt{]}, though this is rather annoying. As a default I always use \texttt{align}.


\subsection{Text and Math: super- and subscripts}

Use the \texttt{text} command to insert text into math environments. For subscripts use \texttt{textnormal}. 
% 
We use the \texttt{textnormal} command for super- or subscripts rather than the \texttt{text} command because this automatically uses the correct size. Compare, for example: $G_\textnormal{D},\, G_\text{D}$.

One place this shows up is if you have a subscript that is not a mathematical variable. For example, $x_a$ makes sense for the value of $x$ at point $a$, but $x_\text{b}$ should be used if the `b' is shorthand for boundary. Similarly, $E_\text{max}$ for the maximum energy, rather than $E_{max}$.


\subsection{Units and spacing}

Use a tie (tilde) to enforce a non-breaking short space between a number and its units: $0.5~\text{MeV}$. Units should not be italicized.


\subsection{Upright characters}

These come from the \acro{ISO 80000} standards for typesetting mathematics and physics.\footnote{See discussion in \url{https://tex.stackexchange.com/questions/14821/whats-the-proper-way-to-typeset-a-differential-operator}} It is not obvious to me that these are applicable to the typographical culture of physics, but the most important thing is to be consistent.
\begin{itemize}
	\item Units are always upright, \textmu m is a micrometer. You can use various unit packages to do this automatically. 
	\item The base of the natural logarithm is upright $\e^{i\pi}$ versus $e^{i\pi}$.
	\item The differential is an operator so it should be upright. I have macros for this: $dx$ vs.~$\D{x}$ and $\dbar p$ vs.~$\Dbar{p}$. The \texttt{physics} package has macros for this. 
\end{itemize}
There is a historical discussion on \texttt{hsm.stackexchange}\footnote{\url{https://hsm.stackexchange.com/questions/6727/fracdydx-versus-frac-mathrm-dy-mathrm-dx}}.



\subsection{Miscellaneous}


\begin{itemize}
	\item Use $\mid$ instead of pipe for conditions: $p(x\mid y)$ versus $p(x|y)$.
	% 
	\item Transpose: The \acro{ISO}~80000 standard has suggestions. $A^T$ vs $A^\top$ vs $A^{\trans}$. I personally prefer $A^\text{T}$.
	% 
	\item \textbf{Textual subscripts}: sometimes you have a subscript that is not an index, but shorthand for something textual. For example, the Green's function with Dirichlet boundary conditions is $G_\textnormal{D}$. The subscript is upright, not italicized, $G_D$. Use the \texttt{textnormal} command rather than the \texttt{text} command since this will automatically use the correct size. Comparison: $G_\textnormal{D},\, G_\text{D}$.
	% 
	\item Arrows with text under them: \texttt{xrightarrow} in the \texttt{amsmath} package. The square bracketed argument is under, the curly bracketed argument is over. Example: $\xrightarrow[\textnormal{low}]{\textnormal{hi}}$.
	% 
\end{itemize}


\section{Space}

\subsection{Kerning: spacing between characters}
Math operators have a natural spacing before and after depending on the context. In the following example, spaces indicate that the coefficient $a$ multiplies the logarithm of $b$:
\begin{align}
	a\log b && a\log(bc)
\end{align}
The space on either side of $\log$ indicate that $\log$ is a mathematical operator. The second example still has the space between $a$ and $\log$, but has no space between $\log$ and $(bc)$ because the parenthesis belongs to the mathematical function.\footnote{Example from \url{https://tex.stackexchange.com/a/140647}}
% 
You can use \textbackslash\texttt{DeclareMathOperator} for functions that are not built in.


\subsection{Manual Spacing}

\LaTeXx has commands for manually inserting spacing: thin\,space, medium\:space, thick\;space, thin\!negative\!space.


\subsection{Ties create non-breaking spaces}

\LaTeXx interprets periods as full stops (end of a sentence). It places extra space after the full stop. Use a \textbf{tie} (tilde) when a period is not a full stop: Mr.~Roboto versus Mr. Roboto. 
% 
You can also use ties this whenever you want to prevent a line break between words. \LaTeXx interprets the tied words as a single word.
% 
Ties are also standard for citations$\sim$\textbackslash\texttt{cite}\{\texttt{citation}\}.



\section{Some Best Practices}

\subsection{\texorpdfstring{\LaTeXx in a title}{LaTeX in a title}}

When using \LaTeXx code in a section title, use the \texttt{texorpdfstring} command to define an \acro{UTF-8} string that the pdf can use for bookmarks. If you do not do this, there are annoying compilation warnings.


\subsection{Ranges}

Hyphens, en dashes, em dashes, and minus signs in math mode are all grammatically different.
\begin{itemize}
	\item En dashes replace hyphens in a compound adjective where one of the elements is a two-word compound: `post--Cold War era.'\footnote{From \url{https://www.merriam-webster.com/words-at-play/em-dash-en-dash-how-to-use}}
	\item En dashes are used for combinations of two names in place of the wordd `and'. Randall--Sundrum model.
	\item For compound names of a single person, use a hyphen: Levi-Civita.
\end{itemize}


